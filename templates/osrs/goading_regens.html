<div class="window-content" id="goading-regens-container">
    <div class="title-bar" id="goading-regens-title-bar">
        <h4>Goading & P Regen Potions - Production Calculator</h4>
        <button id="close-goading-regens-button" class="w98-button title-button">X</button>
    </div>
    <div class="content-container">
        <div class="action-bar">
            <button id="refresh-goading-regens-button" class="w98-button" disabled>Refresh Data</button>
        </div>

        {% if error %}
            <div class="error">
                Error: {{ error }}
            </div>
        {% else %}
            <div class="refresh-info">
                Production cost analysis for Goading and Prayer Regeneration potions based on current OSRS Grand Exchange prices. 
                Calculations include ingredient costs, GE tax, and profit margins. 
                Calculations assume the user is wearing goggles and using an alchemical amulet.
            </div>

            <div class="main-content-grid">
                <div class="potion-grid">
                    <!-- Goading 4 Section -->
                    <div class="potion-card">
                        <div class="potion-header">
                            <h3>{{ goading_info.name }}</h3>
                            <div class="item-id">ID: {{ goading_info.id }}</div>
                        </div>

                    {% if goading_data %}
                        <div class="time-intervals">
                            {% if goading_data.get('production_cost_5m_fmt') %}
                            <div class="time-group">
                                <h4>5-Minute Pricing</h4>
                                <div class="data-row">
                                    <span class="label">Production Cost:</span>
                                    <span class="value">{{ goading_data.production_cost_5m_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">Revenue:</span>
                                    <span class="value">{{ goading_data.revenue_5m_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">Profit:</span>
                                    <span class="value profit">{{ goading_data.profit_5m_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">GP/Hour:</span>
                                    <span class="value profit">{{ goading_data.gp_per_hour_5m_fmt }}</span>
                                </div>
                            </div>
                            {% endif %}

                            {% if goading_data.get('production_cost_15m_fmt') %}
                            <div class="time-group">
                                <h4>15-Minute Pricing</h4>
                                <div class="data-row">
                                    <span class="label">Production Cost:</span>
                                    <span class="value">{{ goading_data.production_cost_15m_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">Revenue:</span>
                                    <span class="value">{{ goading_data.revenue_15m_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">Profit:</span>
                                    <span class="value profit">{{ goading_data.profit_15m_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">GP/Hour:</span>
                                    <span class="value profit">{{ goading_data.gp_per_hour_15m_fmt }}</span>
                                </div>
                            </div>
                            {% endif %}

                            {% if goading_data.get('production_cost_1h_fmt') %}
                            <div class="time-group">
                                <h4>1-Hour Pricing</h4>
                                <div class="data-row">
                                    <span class="label">Production Cost:</span>
                                    <span class="value">{{ goading_data.production_cost_1h_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">Revenue:</span>
                                    <span class="value">{{ goading_data.revenue_1h_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">Profit:</span>
                                    <span class="value profit">{{ goading_data.profit_1h_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">GP/Hour:</span>
                                    <span class="value profit">{{ goading_data.gp_per_hour_1h_fmt }}</span>
                                </div>
                            </div>
                            {% endif %}

                            {% if goading_data.get('production_cost_3h_fmt') %}
                            <div class="time-group">
                                <h4>3-Hour Pricing</h4>
                                <div class="data-row">
                                    <span class="label">Production Cost:</span>
                                    <span class="value">{{ goading_data.production_cost_3h_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">Revenue:</span>
                                    <span class="value">{{ goading_data.revenue_3h_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">Profit:</span>
                                    <span class="value profit">{{ goading_data.profit_3h_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">GP/Hour:</span>
                                    <span class="value profit">{{ goading_data.gp_per_hour_3h_fmt }}</span>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    {% endif %}
                </div>

                <!-- P Regen 4 Section -->
                <div class="potion-card">
                    <div class="potion-header">
                        <h3>{{ p_regen_info.name }}</h3>
                        <div class="item-id">ID: {{ p_regen_info.id }}</div>
                    </div>

                    {% if p_regen_data %}
                        <div class="time-intervals">
                            {% if p_regen_data.get('production_cost_5m_fmt') %}
                            <div class="time-group">
                                <h4>5-Minute Pricing</h4>
                                <div class="data-row">
                                    <span class="label">Production Cost:</span>
                                    <span class="value">{{ p_regen_data.production_cost_5m_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">Revenue:</span>
                                    <span class="value">{{ p_regen_data.revenue_5m_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">Profit:</span>
                                    <span class="value profit">{{ p_regen_data.profit_5m_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">GP/Hour:</span>
                                    <span class="value profit">{{ p_regen_data.gp_per_hour_5m_fmt }}</span>
                                </div>
                            </div>
                            {% endif %}

                            {% if p_regen_data.get('production_cost_15m_fmt') %}
                            <div class="time-group">
                                <h4>15-Minute Pricing</h4>
                                <div class="data-row">
                                    <span class="label">Production Cost:</span>
                                    <span class="value">{{ p_regen_data.production_cost_15m_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">Revenue:</span>
                                    <span class="value">{{ p_regen_data.revenue_15m_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">Profit:</span>
                                    <span class="value profit">{{ p_regen_data.profit_15m_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">GP/Hour:</span>
                                    <span class="value profit">{{ p_regen_data.gp_per_hour_15m_fmt }}</span>
                                </div>
                            </div>
                            {% endif %}

                            {% if p_regen_data.get('production_cost_1h_fmt') %}
                            <div class="time-group">
                                <h4>1-Hour Pricing</h4>
                                <div class="data-row">
                                    <span class="label">Production Cost:</span>
                                    <span class="value">{{ p_regen_data.production_cost_1h_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">Revenue:</span>
                                    <span class="value">{{ p_regen_data.revenue_1h_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">Profit:</span>
                                    <span class="value profit">{{ p_regen_data.profit_1h_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">GP/Hour:</span>
                                    <span class="value profit">{{ p_regen_data.gp_per_hour_1h_fmt }}</span>
                                </div>
                            </div>
                            {% endif %}

                            {% if p_regen_data.get('production_cost_3h_fmt') %}
                            <div class="time-group">
                                <h4>3-Hour Pricing</h4>
                                <div class="data-row">
                                    <span class="label">Production Cost:</span>
                                    <span class="value">{{ p_regen_data.production_cost_3h_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">Revenue:</span>
                                    <span class="value">{{ p_regen_data.revenue_3h_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">Profit:</span>
                                    <span class="value profit">{{ p_regen_data.profit_3h_fmt }}</span>
                                </div>
                                <div class="data-row">
                                    <span class="label">GP/Hour:</span>
                                    <span class="value profit">{{ p_regen_data.gp_per_hour_3h_fmt }}</span>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    {% endif %}
                </div>
            </div>

                <!-- Raw Ingredient Prices Section -->
                <div class="raw-prices-section">
                    <h3 class="section-title">Raw Ingredient Prices (No Modifiers)</h3>
                
                <!-- Finished Potions -->
                <div class="ingredient-category">
                    <h4 class="category-title">Finished Potions</h4>
                    <div class="ingredients-grid">
                        <div class="ingredient-item">
                            <div class="ingredient-name">{{ goading_info.name }}</div>
                            <div class="ingredient-id">ID: {{ goading_info.id }}</div>
                            <div class="price-intervals">
                                <div class="price-row">
                                    <span class="interval">5min:</span>
                                    <span class="price">{{ goading_data.goading_4_cost_5m_fmt }}</span>
                                </div>
                                <div class="price-row">
                                    <span class="interval">15min:</span>
                                    <span class="price">{{ goading_data.goading_4_cost_15m_fmt }}</span>
                                </div>
                                <div class="price-row">
                                    <span class="interval">1h:</span>
                                    <span class="price">{{ goading_data.goading_4_cost_1h_fmt }}</span>
                                </div>
                                <div class="price-row">
                                    <span class="interval">3h:</span>
                                    <span class="price">{{ goading_data.goading_4_cost_3h_fmt }}</span>
                                </div>
                            </div>
                        </div>
                        <div class="ingredient-item">
                            <div class="ingredient-name">{{ p_regen_info.name }}</div>
                            <div class="ingredient-id">ID: {{ p_regen_info.id }}</div>
                            <div class="price-intervals">
                                <div class="price-row">
                                    <span class="interval">5min:</span>
                                    <span class="price">{{ p_regen_data.pregen4_cost_5m_fmt }}</span>
                                </div>
                                <div class="price-row">
                                    <span class="interval">15min:</span>
                                    <span class="price">{{ p_regen_data.pregen4_cost_15m_fmt }}</span>
                                </div>
                                <div class="price-row">
                                    <span class="interval">1h:</span>
                                    <span class="price">{{ p_regen_data.pregen4_cost_1h_fmt }}</span>
                                </div>
                                <div class="price-row">
                                    <span class="interval">3h:</span>
                                    <span class="price">{{ p_regen_data.pregen4_cost_3h_fmt }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Secondary Ingredients -->
                <div class="ingredient-category">
                    <h4 class="category-title">Secondary Ingredients</h4>
                    <div class="ingredients-grid">
                        <div class="ingredient-item">
                            <div class="ingredient-name">Aldarium</div>
                            <div class="ingredient-id">ID: 29993</div>
                            <div class="price-intervals">
                                <div class="price-row">
                                    <span class="interval">5min:</span>
                                    <span class="price">{{ p_regen_data.aldarium_cost_5_fmt }}</span>
                                </div>
                                <div class="price-row">
                                    <span class="interval">15min:</span>
                                    <span class="price">{{ p_regen_data.aldarium_cost_15m_fmt }}</span>
                                </div>
                                <div class="price-row">
                                    <span class="interval">1h:</span>
                                    <span class="price">{{ p_regen_data.aldarium_cost_1h_fmt }}</span>
                                </div>
                                <div class="price-row">
                                    <span class="interval">3h:</span>
                                    <span class="price">{{ p_regen_data.aldarium_cost_3h_fmt }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Primary Ingredients -->
                <div class="ingredient-category">
                    <h4 class="category-title">Primary Ingredients</h4>
                    
                    <!-- Goading Herbs -->
                    <div class="herb-subcategory">
                        <h5 class="subcategory-title">Goading Herbs</h5>
                        <div class="ingredients-grid">
                            <div class="ingredient-item">
                                <div class="ingredient-name">Harralander</div>
                                <div class="price-intervals">
                                    <div class="price-row">
                                        <span class="interval">5min:</span>
                                        <span class="price">{{ goading_data.cheapest_5min_primary_cost_fmt }}</span>
                                        <span class="price">{{ goading_data.cheapest_5min_primary_label }}</span>
                                    </div>
                                    <div class="price-row">
                                        <span class="interval">15min:</span>
                                        <span class="price">{{ goading_data.cheapest_15min_primary_cost_fmt }}</span>
                                        <span class="price">{{ goading_data.cheapest_15min_primary_label }}</span>
                                    </div>
                                    <div class="price-row">
                                        <span class="interval">1h:</span>
                                        <span class="price">{{ goading_data.cheapest_1h_primary_cost_fmt }}</span>
                                        <span class="price">{{ goading_data.cheapest_1h_primary_label }}</span>
                                    </div>
                                    <div class="price-row">
                                        <span class="interval">3h:</span>
                                        <span class="price">{{ goading_data.cheapest_3h_primary_cost_fmt }}</span>
                                        <span class="price">{{ goading_data.cheapest_3h_primary_label }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Prayer Regen Herbs -->
                    <div class="herb-subcategory">
                        <h5 class="subcategory-title">Prayer Regen Herbs</h5>
                        <div class="ingredients-grid">
                            <div class="ingredient-item">
                                <div class="ingredient-name">Huascas</div>
                                <div class="price-intervals">
                                    <div class="price-row">
                                        <span class="interval">5min:</span>
                                        <span class="price">{{ p_regen_data.cheapest_5min_primary_cost_fmt }}</span>
                                        <span class="price">{{ p_regen_data.cheapest_5min_primary_label }}</span>
                                    </div>
                                    <div class="price-row">
                                        <span class="interval">15min:</span>
                                        <span class="price">{{ p_regen_data.cheapest_15min_primary_cost_fmt }}</span>
                                        <span class="price">{{ p_regen_data.cheapest_15min_primary_label }}</span>
                                    </div>
                                    <div class="price-row">
                                        <span class="interval">1h:</span>
                                        <span class="price">{{ p_regen_data.cheapest_1h_primary_cost_fmt }}</span>
                                        <span class="price">{{ p_regen_data.cheapest_1h_primary_label }}</span>
                                    </div>
                                    <div class="price-row">
                                        <span class="interval">3h:</span>
                                        <span class="price">{{ p_regen_data.cheapest_3h_primary_cost_fmt }}</span>
                                        <span class="price">{{ p_regen_data.cheapest_3h_primary_label }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div> <!-- Close main-content-grid -->
        {% endif %}
    </div>
</div>

<style>
    .main-content-grid {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 30px;
        margin-top: 20px;
    }

    .potion-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
    }

    .potion-card {
        border: 2px solid #c0c0c0;
        padding: 15px;
        background-color: #f8f8f8;
    }

    .potion-header {
        text-align: center;
        margin-bottom: 15px;
        border-bottom: 1px solid #ccc;
        padding-bottom: 10px;
    }

    .potion-header h3 {
        margin: 0;
        color: #000080;
    }

    .item-id {
        font-size: 0.9em;
        color: #666;
    }

    .time-group {
        border: 1px solid #ddd;
        padding: 10px;
        margin-bottom: 10px;
        background-color: #fff;
    }

    .time-group h4 {
        margin: 0 0 10px 0;
        color: #000080;
        border-bottom: 1px solid #eee;
        padding-bottom: 5px;
    }

    .data-row {
        display: flex;
        justify-content: space-between;
        padding: 3px 0;
        border-bottom: 1px dotted #eee;
    }

    .data-row:last-child {
        border-bottom: none;
    }

    .label {
        font-weight: bold;
    }

    .value {
        font-family: monospace;
    }

    .value.profit {
        color: #008000;
        font-weight: bold;
    }

    .action-bar {
        margin-bottom: 15px;
        text-align: center;
    }

    .refresh-info {
        background-color: #e6f3ff;
        padding: 10px;
        border: 1px solid #b3d9ff;
        margin-bottom: 15px;
        border-radius: 4px;
    }

    .content-container {
        padding: 10px;
    }

    .error {
        background-color: #ffe6e6;
        color: #cc0000;
        padding: 10px;
        border: 1px solid #ff9999;
        border-radius: 4px;
        margin: 10px 0;
    }

    /* Raw Prices Section Styles */
    .raw-prices-section {
        margin-top: 0;
        padding: 20px;
        border: 2px solid #c0c0c0;
        background-color: #f0f0f0;
        border-radius: 6px;
        height: fit-content;
    }

    .section-title {
        text-align: center;
        color: #000080;
        margin: 0 0 20px 0;
        font-size: 1.2em;
        border-bottom: 2px solid #000080;
        padding-bottom: 10px;
    }

    .ingredient-category {
        margin-bottom: 15px;
    }

    .category-title {
        color: #000080;
        margin: 0 0 10px 0;
        font-size: 1em;
        border-bottom: 1px solid #ccc;
        padding-bottom: 5px;
    }

    .herb-subcategory {
        margin-bottom: 12px;
    }

    .subcategory-title {
        color: #006600;
        margin: 0 0 8px 0;
        font-size: 0.9em;
        font-weight: bold;
    }

    .ingredients-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 10px;
    }

    .ingredient-item {
        border: 1px solid #ccc;
        padding: 8px;
        background-color: #fff;
        border-radius: 4px;
        box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }

    .ingredient-name {
        font-weight: bold;
        color: #000080;
        margin-bottom: 4px;
    }

    .ingredient-id {
        font-size: 0.85em;
        color: #666;
        margin-bottom: 8px;
    }

    .price-intervals {
        border-top: 1px solid #eee;
        padding-top: 8px;
    }

    .price-row {
        display: flex;
        justify-content: space-between;
        padding: 2px 0;
        border-bottom: 1px dotted #ddd;
    }

    .price-row:last-child {
        border-bottom: none;
    }

    .interval {
        font-weight: bold;
        color: #333;
        min-width: 45px;
    }

    .price {
        font-family: monospace;
        color: #008000;
        font-weight: bold;
    }
</style>